DATA SEGMENT
	NUM EQU 30
	GRADE DW NUM DUP(?)
	RANK DB NUM DUP(?)
DATA ENDS

STACK SEGMENT STACK
	DW 100H DUP(0)
STACK ENDS

CODE SEGMENT
	ASSUME CS:CODE, DS:DATA, SS:STACK
START:
	MOV AX, DATA
	MOV DS, AX
	MOV AX, STACK
	MOV SS, AX

	MOV CX, NUM
	MOV SI, OFFSET GRADE
	MOV DI, OFFSET RANK		
LOOP_1:
	PUSH CX			;
	PUSH SI			;保存外层循环变量
	
	MOV AX, [SI]		;ax存储第i个学生的分数			
	MOV BX, 1		;bx存储第i个学生的排名
	MOV CX, NUM
	MOV SI, OFFSET GRADE
	LOOP_2:
		CMP AX, [SI]	;内层循环比较每个学生和
		JAE HIGH	;当前学生分数的大小，每
		INC BX		;有一个比当前大，排名加1
	HIGH:
		ADD SI, 2
	LOOP LOOP_2
	
	MOV [DI], BX		;将该学生排名放入数组
	
	POP SI
	POP CX
	INC DI
	ADD SI, 2
LOOP LOOP_1

	MOV AH, 04CH
	INT 21H
CODE ENDS
